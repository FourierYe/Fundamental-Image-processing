im = imread('lenna512_low_dynamic_range.bmp')

[m,n]=size(im);
after_image = zeros(m,n);

for i=1:m
    for j=1:n
        after_image(i,j)=piecewise_enhance(im(i,j));
    end

end
figure(1)
imshow(uint8 ( after_image))

figure(2)